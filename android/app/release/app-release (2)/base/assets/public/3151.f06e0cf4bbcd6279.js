"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3151,8254],{3008:(j,H,b)=>{b.d(H,{s:()=>i});var T=b(467),E=b(8254),$=b(2615);let i=(()=>{var K;class P{constructor(){this.INSPECAO_INICIAL_KEY="checklist_inspecao_inicial",this.INSPECAO_VEICULO_KEY="checklist_inspecao_veiculo",this.FOTOS_VEICULO_KEY="checklist_fotos_veiculo",this.PNEUS_KEY="checklist_pneus"}salvarInspecaoInicial(v){var s=this;return(0,T.A)(function*(){try{yield E.Preferences.set({key:s.INSPECAO_INICIAL_KEY,value:JSON.stringify(v)}),console.log("Inspe\xe7\xe3o inicial salva localmente")}catch(u){console.error("Erro ao salvar inspe\xe7\xe3o inicial:",u)}})()}recuperarInspecaoInicial(){var v=this;return(0,T.A)(function*(){try{const{value:s}=yield E.Preferences.get({key:v.INSPECAO_INICIAL_KEY});return s?(console.log("Inspe\xe7\xe3o inicial recuperada"),JSON.parse(s)):null}catch(s){return console.error("Erro ao recuperar inspe\xe7\xe3o inicial:",s),null}})()}salvarInspecaoVeiculo(v){var s=this;return(0,T.A)(function*(){try{yield E.Preferences.set({key:s.INSPECAO_VEICULO_KEY,value:JSON.stringify(v)}),console.log("Inspe\xe7\xe3o do ve\xedculo salva localmente")}catch(u){console.error("Erro ao salvar inspe\xe7\xe3o do ve\xedculo:",u)}})()}recuperarInspecaoVeiculo(){var v=this;return(0,T.A)(function*(){try{const{value:s}=yield E.Preferences.get({key:v.INSPECAO_VEICULO_KEY});return s?(console.log("Inspe\xe7\xe3o do ve\xedculo recuperada"),JSON.parse(s)):null}catch(s){return console.error("Erro ao recuperar inspe\xe7\xe3o do ve\xedculo:",s),null}})()}salvarFotosVeiculo(v){var s=this;return(0,T.A)(function*(){try{yield E.Preferences.set({key:s.FOTOS_VEICULO_KEY,value:JSON.stringify(v)}),console.log("Fotos do ve\xedculo salvas localmente")}catch(u){console.error("Erro ao salvar fotos do ve\xedculo:",u)}})()}recuperarFotosVeiculo(){var v=this;return(0,T.A)(function*(){try{const{value:s}=yield E.Preferences.get({key:v.FOTOS_VEICULO_KEY});return s?(console.log("Fotos do ve\xedculo recuperadas"),JSON.parse(s)):null}catch(s){return console.error("Erro ao recuperar fotos do ve\xedculo:",s),null}})()}salvarPneus(v){var s=this;return(0,T.A)(function*(){try{yield E.Preferences.set({key:s.PNEUS_KEY,value:JSON.stringify(v)}),console.log("Pneus salvos localmente")}catch(u){console.error("Erro ao salvar pneus:",u)}})()}recuperarPneus(){var v=this;return(0,T.A)(function*(){try{const{value:s}=yield E.Preferences.get({key:v.PNEUS_KEY});return s?(console.log("Pneus recuperados"),JSON.parse(s)):null}catch(s){return console.error("Erro ao recuperar pneus:",s),null}})()}limparTodosDados(){var v=this;return(0,T.A)(function*(){try{yield E.Preferences.remove({key:v.INSPECAO_INICIAL_KEY}),yield E.Preferences.remove({key:v.INSPECAO_VEICULO_KEY}),yield E.Preferences.remove({key:v.FOTOS_VEICULO_KEY}),yield E.Preferences.remove({key:v.PNEUS_KEY}),console.log("Todos os dados locais foram limpos")}catch(s){console.error("Erro ao limpar dados locais:",s)}})()}temDadosSalvos(){var v=this;return(0,T.A)(function*(){try{return null!==(yield v.recuperarInspecaoInicial())}catch{return!1}})()}static#e=K=()=>(this.\u0275fac=function(s){return new(s||P)},this.\u0275prov=$.jDH({token:P,factory:P.\u0275fac,providedIn:"root"}))}return K(),P})()},3791:(j,H,b)=>{b.d(H,{B:()=>Le});let E,T={};function $(e={}){T={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...e}}function i(e){return e?T[e]:T}function P(){return E}let F={};function v(e,t){F[e]=t}function s(e){var t;null==(t=F[e])||t.call(F)}function h(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function p(e){const t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return e.flatMap(n=>{const r=n.matches(t),o=Array.from(n.querySelectorAll(t));return[...r?[n]:[],...o]}).filter(n=>"none"!==getComputedStyle(n).pointerEvents&&function M(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(n))}function g(e){if(!e||function L(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(e))return;const t=i("smoothScroll"),n=e.offsetHeight>window.innerHeight;e.scrollIntoView({behavior:!t||w(e)?"auto":"smooth",inline:"center",block:n?"start":"center"})}function w(e){if(!e||!e.parentElement)return;const t=e.parentElement;return t.scrollHeight>t.clientHeight}let O={};function k(e,t){O[e]=t}function c(e){return e?O[e]:O}function ee(){O={}}function te(e){if(!e)return;const t=e.getBoundingClientRect(),n={x:t.x,y:t.y,width:t.width,height:t.height};k("__activeStagePosition",n),ne(n)}function ne(e){const t=c("__overlaySvg");if(!t)return void function he(e){const t=function me(e){const t=window.innerWidth,n=window.innerHeight,r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("driver-overlay","driver-overlay-animated"),r.setAttribute("viewBox",`0 0 ${t} ${n}`),r.setAttribute("xmlSpace","preserve"),r.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1"),r.setAttribute("preserveAspectRatio","xMinYMin slice"),r.style.fillRule="evenodd",r.style.clipRule="evenodd",r.style.strokeLinejoin="round",r.style.strokeMiterlimit="2",r.style.zIndex="10000",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%";const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",oe(e)),o.style.fill=i("overlayColor")||"rgb(0,0,0)",o.style.opacity=`${i("overlayOpacity")}`,o.style.pointerEvents="auto",o.style.cursor="auto",r.appendChild(o),r}(e);document.body.appendChild(t),se(t,n=>{"path"===n.target.tagName&&s("overlayClick")}),k("__overlaySvg",t)}(e);const n=t.firstElementChild;if("path"!==n?.tagName)throw new Error("no path element found in stage svg");n.setAttribute("d",oe(e))}function oe(e){const t=window.innerWidth,n=window.innerHeight,r=i("stagePadding")||0,o=i("stageRadius")||0,a=e.width+2*r,_=e.height+2*r,S=Math.min(o,a/2,_/2),d=Math.floor(Math.max(S,0)),N=a-2*d,l=_-2*d;return`M${t},0L0,0L0,${n}L${t},${n}L${t},0Z\n    M${e.x-r+d},${e.y-r} h${N} a${d},${d} 0 0 1 ${d},${d} v${l} a${d},${d} 0 0 1 -${d},${d} h-${N} a${d},${d} 0 0 1 -${d},-${d} v-${l} a${d},${d} 0 0 1 ${d},-${d} z`}function re(e){const{element:t}=e;let n="function"==typeof t?t():"string"==typeof t?document.querySelector(t):t;n||(n=function ge(){const e=document.getElementById("driver-dummy-element");if(e)return e;let t=document.createElement("div");return t.id="driver-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}()),function ye(e,t){var n;const r=Date.now(),o=c("__activeStep"),a=c("__activeElement")||e,_=!a||a===e,S="driver-dummy-element"===e.id,d="driver-dummy-element"===a.id,A=i("animate"),C=t.onHighlightStarted||i("onHighlightStarted"),N=t?.onHighlighted||i("onHighlighted"),l=o?.onDeselected||i("onDeselected"),m=i(),y=c();!_&&l&&l(d?void 0:a,o,{config:m,state:y,driver:P()}),C&&C(S?void 0:e,t,{config:m,state:y,driver:P()});const x=!_&&A;let f=!1;(function Ce(){const e=c("popover");e&&(e.wrapper.style.display="none")})(),k("previousStep",o),k("previousElement",a),k("activeStep",t),k("activeElement",e);const I=()=>{if(c("__transitionCallback")!==I)return;const U=Date.now()-r;t.popover&&400-U<=200&&!f&&x&&(ae(e,t),f=!0),i("animate")&&U<400?function pe(e,t,n,r){let o=c("__activeStagePosition");const a=o||n.getBoundingClientRect(),_=r.getBoundingClientRect();o={x:h(e,a.x,_.x-a.x,t),y:h(e,a.y,_.y-a.y,t),width:h(e,a.width,_.width-a.width,t),height:h(e,a.height,_.height-a.height,t)},ne(o),k("__activeStagePosition",o)}(U,400,a,e):(te(e),N&&N(S?void 0:e,t,{config:i(),state:c(),driver:P()}),k("__transitionCallback",void 0),k("__previousStep",o),k("__previousElement",a),k("__activeStep",t),k("__activeElement",e)),window.requestAnimationFrame(I)};k("__transitionCallback",I),window.requestAnimationFrame(I),g(e),!x&&t.popover&&ae(e,t),a.classList.remove("driver-active-element","driver-no-interaction"),a.removeAttribute("aria-haspopup"),a.removeAttribute("aria-expanded"),a.removeAttribute("aria-controls"),(null!=(n=t.disableActiveInteraction)?n:i("disableActiveInteraction"))&&e.classList.add("driver-no-interaction"),e.classList.add("driver-active-element"),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls","driver-popover-content")}(n,e)}function we(){const e=c("__activeElement"),t=c("__activeStep");e&&(te(e),function ve(){const e=c("__activeStagePosition"),t=c("__overlaySvg");if(!e)return;if(!t)return void console.warn("No stage svg found.");const n=window.innerWidth,r=window.innerHeight;t.setAttribute("viewBox",`0 0 ${n} ${r}`)}(),ue(e,t))}function z(){const e=c("__resizeTimeout");e&&window.cancelAnimationFrame(e),k("__resizeTimeout",window.requestAnimationFrame(we))}function be(e){var t;if(!c("isInitialized")||"Tab"!==e.key&&9!==e.keyCode)return;const n=c("__activeElement"),r=null==(t=c("popover"))?void 0:t.wrapper,o=p([...r?[r]:[],...n?[n]:[]]),a=o[0],_=o[o.length-1];if(e.preventDefault(),e.shiftKey){const S=o[o.indexOf(document.activeElement)-1]||_;S?.focus()}else{const S=o[o.indexOf(document.activeElement)+1]||a;S?.focus()}}function ie(e){var t;(null==(t=i("allowKeyboardControl"))||t)&&("Escape"===e.key?s("escapePress"):"ArrowRight"===e.key?s("arrowRightPress"):"ArrowLeft"===e.key&&s("arrowLeftPress"))}function se(e,t,n){const r=(o,a)=>{const _=o.target;e.contains(_)&&((!n||n(_))&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation()),a?.(o))};document.addEventListener("pointerdown",r,!0),document.addEventListener("mousedown",r,!0),document.addEventListener("pointerup",r,!0),document.addEventListener("mouseup",r,!0),document.addEventListener("click",o=>{r(o,t)},!0)}function ae(e,t){var n,r;let o=c("popover");o&&document.body.removeChild(o.wrapper),o=function Ae(){const e=document.createElement("div");e.classList.add("driver-popover");const t=document.createElement("div");t.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const r=document.createElement("div");r.id="driver-popover-description",r.classList.add("driver-popover-description"),r.style.display="none",r.innerText="Popover description is here";const o=document.createElement("button");o.type="button",o.classList.add("driver-popover-close-btn"),o.setAttribute("aria-label","Close"),o.innerHTML="&times;";const a=document.createElement("footer");a.classList.add("driver-popover-footer");const _=document.createElement("span");_.classList.add("driver-popover-progress-text"),_.innerText="";const S=document.createElement("span");S.classList.add("driver-popover-navigation-btns");const d=document.createElement("button");d.type="button",d.classList.add("driver-popover-prev-btn"),d.innerHTML="&larr; Previous";const A=document.createElement("button");return A.type="button",A.classList.add("driver-popover-next-btn"),A.innerHTML="Next &rarr;",S.appendChild(d),S.appendChild(A),a.appendChild(_),a.appendChild(S),e.appendChild(o),e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(a),{wrapper:e,arrow:t,title:n,description:r,footer:a,previousButton:d,nextButton:A,closeButton:o,footerButtons:S,progress:_}}(),document.body.appendChild(o.wrapper);const{title:a,description:_,showButtons:S,disableButtons:d,showProgress:A,nextBtnText:C=i("nextBtnText")||"Next &rarr;",prevBtnText:N=i("prevBtnText")||"&larr; Previous",progressText:l=i("progressText")||"{current} of {total}"}=t.popover||{};o.nextButton.innerHTML=C,o.previousButton.innerHTML=N,o.progress.innerHTML=l,a?(o.title.innerHTML=a,o.title.style.display="block"):o.title.style.display="none",_?(o.description.innerHTML=_,o.description.style.display="block"):o.description.style.display="none";const m=S||i("showButtons"),y=A||i("showProgress")||!1,x=m?.includes("next")||m?.includes("previous")||y;o.closeButton.style.display=m.includes("close")?"block":"none",x?(o.footer.style.display="flex",o.progress.style.display=y?"block":"none",o.nextButton.style.display=m.includes("next")?"block":"none",o.previousButton.style.display=m.includes("previous")?"block":"none"):o.footer.style.display="none";const f=d||i("disableButtons")||[];null!=f&&f.includes("next")&&(o.nextButton.disabled=!0,o.nextButton.classList.add("driver-popover-btn-disabled")),null!=f&&f.includes("previous")&&(o.previousButton.disabled=!0,o.previousButton.classList.add("driver-popover-btn-disabled")),null!=f&&f.includes("close")&&(o.closeButton.disabled=!0,o.closeButton.classList.add("driver-popover-btn-disabled"));const I=o.wrapper;I.style.display="block",I.style.left="",I.style.top="",I.style.bottom="",I.style.right="",I.id="driver-popover-content",I.setAttribute("role","dialog"),I.setAttribute("aria-labelledby","driver-popover-title"),I.setAttribute("aria-describedby","driver-popover-description"),o.arrow.className="driver-popover-arrow";const B=(null==(n=t.popover)?void 0:n.popoverClass)||i("popoverClass")||"";I.className=`driver-popover ${B}`.trim(),se(o.wrapper,V=>{var G,Q,X;const J=V.target,Z=(null==(G=t.popover)?void 0:G.onNextClick)||i("onNextClick"),Y=(null==(Q=t.popover)?void 0:Q.onPrevClick)||i("onPrevClick"),q=(null==(X=t.popover)?void 0:X.onCloseClick)||i("onCloseClick");return J.closest(".driver-popover-next-btn")?Z?Z(e,t,{config:i(),state:c(),driver:P()}):s("nextClick"):J.closest(".driver-popover-prev-btn")?Y?Y(e,t,{config:i(),state:c(),driver:P()}):s("prevClick"):J.closest(".driver-popover-close-btn")?q?q(e,t,{config:i(),state:c(),driver:P()}):s("closeClick"):void 0},V=>!(null!=o&&o.description.contains(V))&&!(null!=o&&o.title.contains(V))&&"string"==typeof V.className&&V.className.includes("driver-popover")),k("popover",o);const W=(null==(r=t.popover)?void 0:r.onPopoverRender)||i("onPopoverRender");W&&W(o,{config:i(),state:c(),driver:P()}),ue(e,t),g(I);const D=p([I,...e.classList.contains("driver-dummy-element")?[]:[e]]);D.length>0&&D[0].focus()}function le(){const e=c("popover");if(null==e||!e.wrapper)return;const t=e.wrapper.getBoundingClientRect(),n=i("stagePadding")||0,r=i("popoverOffset")||0;return{width:t.width+n+r,height:t.height+n+r,realWidth:t.width,realHeight:t.height}}function ce(e,t){const{elementDimensions:n,popoverDimensions:r,popoverPadding:o,popoverArrowDimensions:a}=t;return"start"===e?Math.max(Math.min(n.top-o,window.innerHeight-r.realHeight-a.width),a.width):"end"===e?Math.max(Math.min(n.top-r?.realHeight+n.height+o,window.innerHeight-r?.realHeight-a.width),a.width):"center"===e?Math.max(Math.min(n.top+n.height/2-r?.realHeight/2,window.innerHeight-r?.realHeight-a.width),a.width):0}function de(e,t){const{elementDimensions:n,popoverDimensions:r,popoverPadding:o,popoverArrowDimensions:a}=t;return"start"===e?Math.max(Math.min(n.left-o,window.innerWidth-r.realWidth-a.width),a.width):"end"===e?Math.max(Math.min(n.left-r?.realWidth+n.width+o,window.innerWidth-r?.realWidth-a.width),a.width):"center"===e?Math.max(Math.min(n.left+n.width/2-r?.realWidth/2,window.innerWidth-r?.realWidth-a.width),a.width):0}function ue(e,t){const n=c("popover");if(!n)return;const{align:r="start",side:o="left"}=t?.popover||{},a=r,_="driver-dummy-element"===e.id?"over":o,S=i("stagePadding")||0,d=le(),A=n.arrow.getBoundingClientRect(),C=e.getBoundingClientRect(),N=C.top-d.height;let l=N>=0;const m=window.innerHeight-(C.bottom+d.height);let y=m>=0;const x=C.left-d.width;let f=x>=0;const I=window.innerWidth-(C.right+d.width);let U=I>=0;const B=!(l||y||f||U);let W=_;if("top"===_&&l?U=f=y=!1:"bottom"===_&&y?U=f=l=!1:"left"===_&&f?U=l=y=!1:"right"===_&&U&&(f=l=y=!1),"over"===_){const R=window.innerWidth/2-d.realWidth/2,D=window.innerHeight/2-d.realHeight/2;n.wrapper.style.left=`${R}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${D}px`,n.wrapper.style.bottom="auto"}else if(B){const R=window.innerWidth/2-d?.realWidth/2,D=10;n.wrapper.style.left=`${R}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${D}px`,n.wrapper.style.top="auto"}else if(f){const R=Math.min(x,window.innerWidth-d?.realWidth-A.width),D=ce(a,{elementDimensions:C,popoverDimensions:d,popoverPadding:S,popoverArrowDimensions:A});n.wrapper.style.left=`${R}px`,n.wrapper.style.top=`${D}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",W="left"}else if(U){const R=Math.min(I,window.innerWidth-d?.realWidth-A.width),D=ce(a,{elementDimensions:C,popoverDimensions:d,popoverPadding:S,popoverArrowDimensions:A});n.wrapper.style.right=`${R}px`,n.wrapper.style.top=`${D}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",W="right"}else if(l){const R=Math.min(N,window.innerHeight-d.realHeight-A.width);let D=de(a,{elementDimensions:C,popoverDimensions:d,popoverPadding:S,popoverArrowDimensions:A});n.wrapper.style.top=`${R}px`,n.wrapper.style.left=`${D}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",W="top"}else if(y){const R=Math.min(m,window.innerHeight-d?.realHeight-A.width);let D=de(a,{elementDimensions:C,popoverDimensions:d,popoverPadding:S,popoverArrowDimensions:A});n.wrapper.style.left=`${D}px`,n.wrapper.style.bottom=`${R}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",W="bottom"}B?n.arrow.classList.add("driver-popover-arrow-none"):function xe(e,t,n){const r=c("popover");if(!r)return;const o=n.getBoundingClientRect(),a=le(),_=r.arrow,S=a.width,d=window.innerWidth,A=o.width,C=o.left,N=a.height,l=window.innerHeight,m=o.top,y=o.height;_.className="driver-popover-arrow";let x=t,f=e;if("top"===t?(C+A<=0?(x="right",f="end"):C+A-S<=0&&(x="top",f="start"),C>=d?(x="left",f="end"):C+S>=d&&(x="top",f="end")):"bottom"===t?(C+A<=0?(x="right",f="start"):C+A-S<=0&&(x="bottom",f="start"),C>=d?(x="left",f="start"):C+S>=d&&(x="bottom",f="end")):"left"===t?(m+y<=0?(x="bottom",f="end"):m+y-N<=0&&(x="left",f="start"),m>=l?(x="top",f="end"):m+N>=l&&(x="left",f="end")):"right"===t&&(m+y<=0?(x="bottom",f="start"):m+y-N<=0&&(x="right",f="start"),m>=l?(x="top",f="start"):m+N>=l&&(x="right",f="end")),x){_.classList.add(`driver-popover-arrow-side-${x}`),_.classList.add(`driver-popover-arrow-align-${f}`);const I=n.getBoundingClientRect(),U=_.getBoundingClientRect(),B=i("stagePadding")||0,W=I.left-B<window.innerWidth&&I.right+B>0&&I.top-B<window.innerHeight&&I.bottom+B>0;"bottom"===t&&W&&(U.x>I.x&&U.x+U.width<I.x+I.width?r.wrapper.style.transform="translateY(0)":(_.classList.remove(`driver-popover-arrow-align-${f}`),_.classList.add("driver-popover-arrow-none"),r.wrapper.style.transform=`translateY(-${B/2}px)`))}else _.classList.add("driver-popover-arrow-none")}(a,W,e)}function Le(e={}){function t(){i("allowClose")&&C()}function n(){const l=i("overlayClickBehavior");i("allowClose")&&"close"===l?C():"nextStep"===l&&r()}function r(){const l=c("activeIndex"),m=i("steps")||[];if(typeof l>"u")return;const y=l+1;m[y]?A(y):C()}function o(){const l=c("activeIndex"),m=i("steps")||[];if(typeof l>"u")return;const y=l-1;m[y]?A(y):C()}function _(){var l;if(c("__transitionCallback"))return;const m=c("activeIndex"),y=c("__activeStep"),x=c("__activeElement");if(typeof m>"u"||typeof y>"u"||typeof c("activeIndex")>"u")return;const f=(null==(l=y.popover)?void 0:l.onPrevClick)||i("onPrevClick");if(f)return f(x,y,{config:i(),state:c(),driver:P()});o()}function S(){var l;if(c("__transitionCallback"))return;const m=c("activeIndex"),y=c("__activeStep"),x=c("__activeElement");if(typeof m>"u"||typeof y>"u")return;const f=(null==(l=y.popover)?void 0:l.onNextClick)||i("onNextClick");if(f)return f(x,y,{config:i(),state:c(),driver:P()});r()}function d(){c("isInitialized")||(k("isInitialized",!0),document.body.classList.add("driver-active",i("animate")?"driver-fade":"driver-simple"),function Ee(){window.addEventListener("keyup",ie,!1),window.addEventListener("keydown",be,!1),window.addEventListener("resize",z),window.addEventListener("scroll",z)}(),v("overlayClick",n),v("escapePress",t),v("arrowLeftPress",_),v("arrowRightPress",S))}function A(l=0){var m,y,x,f,I,U,B,W;const R=i("steps");if(!R)return console.error("No steps to drive through"),void C();if(!R[l])return void C();k("__activeOnDestroyed",document.activeElement),k("activeIndex",l);const D=R[l],V=R[l+1],G=R[l-1],Q=(null==(m=D.popover)?void 0:m.doneBtnText)||i("doneBtnText")||"Done",X=i("allowClose"),J=typeof(null==(y=D.popover)?void 0:y.showProgress)<"u"?null==(x=D.popover)?void 0:x.showProgress:i("showProgress"),Z=((null==(f=D.popover)?void 0:f.progressText)||i("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${l+1}`).replace("{{total}}",`${R.length}`),Y=(null==(I=D.popover)?void 0:I.showButtons)||i("showButtons"),q=["next","previous",...X?["close"]:[]].filter(De=>!(null!=Y&&Y.length)||Y.includes(De)),Se=(null==(U=D.popover)?void 0:U.onNextClick)||i("onNextClick"),Te=(null==(B=D.popover)?void 0:B.onPrevClick)||i("onPrevClick"),ke=(null==(W=D.popover)?void 0:W.onCloseClick)||i("onCloseClick");re({...D,popover:{showButtons:q,nextBtnText:V?void 0:Q,disableButtons:[...G?[]:["previous"]],showProgress:J,progressText:Z,onNextClick:Se||(()=>{V?A(l+1):C()}),onPrevClick:Te||(()=>{A(l-1)}),onCloseClick:ke||(()=>{C()}),...D?.popover||{}}})}function C(l=!0){const m=c("__activeElement"),y=c("__activeStep"),x=c("__activeOnDestroyed"),f=i("onDestroyStarted");if(l&&f)return void f(m&&"driver-dummy-element"!==m?.id?m:void 0,y,{config:i(),state:c(),driver:P()});const I=y?.onDeselected||i("onDeselected"),U=i("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),function Pe(){window.removeEventListener("keyup",ie),window.removeEventListener("resize",z),window.removeEventListener("scroll",z)}(),function Ie(){var e;const t=c("popover");t&&(null==(e=t.wrapper.parentElement)||e.removeChild(t.wrapper))}(),function _e(){var e;null==(e=document.getElementById("driver-dummy-element"))||e.remove(),document.querySelectorAll(".driver-active-element").forEach(t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")})}(),function fe(){const e=c("__overlaySvg");e&&e.remove()}(),function u(){F={}}(),ee(),m&&y){const B="driver-dummy-element"===m.id;I&&I(B?void 0:m,y,{config:i(),state:c(),driver:P()}),U&&U(B?void 0:m,y,{config:i(),state:c(),driver:P()})}x&&x.focus()}$(e);const N={isActive:()=>c("isInitialized")||!1,refresh:z,drive:(l=0)=>{d(),A(l)},setConfig:$,setSteps:l=>{ee(),$({...i(),steps:l})},getConfig:i,getState:c,getActiveIndex:()=>c("activeIndex"),isFirstStep:()=>0===c("activeIndex"),isLastStep:()=>{const l=i("steps")||[],m=c("activeIndex");return void 0!==m&&m===l.length-1},getActiveStep:()=>c("activeStep"),getActiveElement:()=>c("activeElement"),getPreviousElement:()=>c("previousElement"),getPreviousStep:()=>c("previousStep"),moveNext:r,movePrevious:o,moveTo:function a(l){(i("steps")||[])[l]?A(l):C()},hasNextStep:()=>{const l=i("steps")||[],m=c("activeIndex");return void 0!==m&&!!l[m+1]},hasPreviousStep:()=>{const l=i("steps")||[],m=c("activeIndex");return void 0!==m&&!!l[m-1]},highlight:l=>{d(),re({...l,popover:l.popover?{showButtons:[],showProgress:!1,progressText:"",...l.popover}:void 0})},destroy:()=>{C(!1)}};return function K(e){E=e}(N),N}},4796:(j,H,b)=>{b.d(H,{u:()=>F});var T=b(467),E=b(9330),$=b(4412),i=b(8141),K=b(5312),P=b(2615);let F=(()=>{var v;class s{constructor(h){this.http=h,this.baseUrl=K.c.apiUrl;const p=localStorage.getItem("currentUser");this.currentUserSubject=new $.t(p?JSON.parse(p):null),this.currentUser=this.currentUserSubject.asObservable()}get currentUserValue(){return this.currentUserSubject.value}login(h,p){const g=new E.Lr({"Content-Type":"application/json"}),w={acao:"login",nome:h,senha:p};return console.log("=== LOGIN ==="),console.log("URL:",`${this.baseUrl}/veicular_auth.php`),console.log("Dados:",{nome:h,senha:"***"}),this.http.post(`${this.baseUrl}/veicular_auth.php`,w,{headers:g}).pipe((0,i.M)(L=>{console.log("Resposta do login:",L),L.sucesso&&L.usuario&&(localStorage.setItem("currentUser",JSON.stringify(L.usuario)),localStorage.setItem("authToken",L.token||""),this.currentUserSubject.next(L.usuario),console.log("Usu\xe1rio autenticado:",L.usuario))}))}logout(){var h=this;return(0,T.A)(function*(){localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),h.currentUserSubject.next(null);try{const{Preferences:p}=yield Promise.all([b.e(5083),b.e(8254)]).then(b.bind(b,8254));yield p.remove({key:"saved_nome"}),yield p.remove({key:"saved_password"}),yield p.remove({key:"remember_password"})}catch(p){console.log("Erro ao limpar credenciais no logout:",p)}console.log("Usu\xe1rio deslogado")})()}isLoggedIn(){return null!==this.currentUserValue}getAuthToken(){return localStorage.getItem("authToken")}isAdmin(){return"admin"===this.currentUserValue?.tipo_usuario}definirSenha(h,p){const g=new E.Lr({"Content-Type":"application/json"});return this.http.post(`${this.baseUrl}/veicular_auth.php`,{acao:"definir_senha",usuario_id:h,nova_senha:p},{headers:g})}tutorialConcluido(){const h=this.currentUserValue;return!h||h.tutorial_concluido}marcarTutorialConcluido(){const h=this.currentUserValue;if(!h)throw new Error("Usu\xe1rio n\xe3o autenticado");const p=new E.Lr({"Content-Type":"application/json"});return this.http.post(`${this.baseUrl}/veicular_auth.php`,{acao:"marcar_tutorial_concluido",usuario_id:h.id},{headers:p}).pipe((0,i.M)(w=>{console.log("Tutorial marcado como conclu\xeddo:",w),h&&(h.tutorial_concluido=!0,localStorage.setItem("currentUser",JSON.stringify(h)),this.currentUserSubject.next(h))}))}static#e=v=()=>(this.\u0275fac=function(p){return new(p||s)(P.KVO(E.Qq))},this.\u0275prov=P.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}))}return v(),s})()},5312:(j,H,b)=>{b.d(H,{c:()=>T});const T={production:!0,apiUrl:"https://floripa.in9automacao.com.br"}},6789:(j,H,b)=>{b.d(H,{i:()=>i});var T=b(5312),E=b(2615),$=b(9330);let i=(()=>{var K;class P{constructor(v){this.http=v,this.baseUrl=T.c.apiUrl,this.inicioTela=null,this.telaAtual=null}iniciarTela(v){this.telaAtual=v,this.inicioTela=new Date,console.log(`[Tempo] Iniciado rastreamento da tela: ${v} \xe0s ${this.inicioTela.toISOString()}`)}finalizarTela(v,s){if(!this.inicioTela||!this.telaAtual)return console.warn("[Tempo] Tentativa de finalizar tela sem ter iniciado rastreamento"),null;const u=new Date,h=Math.round((u.getTime()-this.inicioTela.getTime())/1e3),p={tela:this.telaAtual,tempo_segundos:h,data_hora_inicio:this.formatarDataHora(this.inicioTela),data_hora_fim:this.formatarDataHora(u),inspecao_id:v||null,usuario_id:s||null};return console.log(`[Tempo] Finalizando tela: ${this.telaAtual}, tempo: ${h}s`,p),this.inicioTela=null,this.telaAtual=null,this.salvarTempo(p)}cancelarRastreamento(){this.telaAtual&&console.log(`[Tempo] Cancelando rastreamento da tela: ${this.telaAtual}`),this.inicioTela=null,this.telaAtual=null}salvarTempo(v){return this.http.post(`${this.baseUrl}/veicular_tempotelas.php`,v)}buscarPorInspecao(v){return this.http.get(`${this.baseUrl}/veicular_tempotelas.php?acao=inspecao&inspecao_id=${v}`)}buscarPorUsuario(v){return this.http.get(`${this.baseUrl}/veicular_tempotelas.php?acao=usuario&usuario_id=${v}`)}buscarEstatisticas(){return this.http.get(`${this.baseUrl}/veicular_tempotelas.php?acao=estatisticas`)}formatarDataHora(v){return`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}-${String(v.getDate()).padStart(2,"0")} ${String(v.getHours()).padStart(2,"0")}:${String(v.getMinutes()).padStart(2,"0")}:${String(v.getSeconds()).padStart(2,"0")}`}getTempoAtualSegundos(){return this.inicioTela?Math.round(((new Date).getTime()-this.inicioTela.getTime())/1e3):0}isRastreamentoAtivo(){return null!==this.inicioTela}getTelaAtual(){return this.telaAtual}static#e=K=()=>(this.\u0275fac=function(s){return new(s||P)(E.KVO($.Qq))},this.\u0275prov=E.jDH({token:P,factory:P.\u0275fac,providedIn:"root"}))}return K(),P})()},7691:(j,H,b)=>{b.d(H,{i7:()=>v,LK:()=>K,ru:()=>$});var T=b(5083),E=b(467),$=function(s){return s.Prompt="PROMPT",s.Camera="CAMERA",s.Photos="PHOTOS",s}($||{}),i=function(s){return s.Rear="REAR",s.Front="FRONT",s}(i||{}),K=function(s){return s.Uri="uri",s.Base64="base64",s.DataUrl="dataUrl",s}(K||{});class P extends T.E_{getPhoto(u){var h=this;return(0,E.A)(function*(){return new Promise(function(){var p=(0,E.A)(function*(g,w){if(u.webUseInput||u.source===$.Photos)h.fileInputExperience(u,g,w);else if(u.source===$.Prompt){let L=document.querySelector("pwa-action-sheet");L||(L=document.createElement("pwa-action-sheet"),document.body.appendChild(L)),L.header=u.promptLabelHeader||"Photo",L.cancelable=!1,L.options=[{title:u.promptLabelPhoto||"From Photos"},{title:u.promptLabelPicture||"Take Picture"}],L.addEventListener("onSelection",function(){var M=(0,E.A)(function*(O){0===O.detail?h.fileInputExperience(u,g,w):h.cameraExperience(u,g,w)});return function(O){return M.apply(this,arguments)}}())}else h.cameraExperience(u,g,w)});return function(g,w){return p.apply(this,arguments)}}())})()}pickImages(u){var h=this;return(0,E.A)(function*(){return new Promise(function(){var p=(0,E.A)(function*(g,w){h.multipleFileInputExperience(g,w)});return function(g,w){return p.apply(this,arguments)}}())})()}cameraExperience(u,h,p){var g=this;return(0,E.A)(function*(){if(customElements.get("pwa-camera-modal")){const w=document.createElement("pwa-camera-modal");w.facingMode=u.direction===i.Front?"user":"environment",document.body.appendChild(w);try{yield w.componentOnReady(),w.addEventListener("onPhoto",function(){var L=(0,E.A)(function*(M){const O=M.detail;null===O?p(new T.I9("User cancelled photos app")):O instanceof Error?p(O):h(yield g._getCameraPhoto(O,u)),w.dismiss(),document.body.removeChild(w)});return function(M){return L.apply(this,arguments)}}()),w.present()}catch{g.fileInputExperience(u,h,p)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),g.fileInputExperience(u,h,p)})()}fileInputExperience(u,h,p){let g=document.querySelector("#_capacitor-camera-input");const w=()=>{var L;null===(L=g.parentNode)||void 0===L||L.removeChild(g)};g||(g=document.createElement("input"),g.id="_capacitor-camera-input",g.type="file",g.hidden=!0,document.body.appendChild(g),g.addEventListener("change",L=>{const M=g.files[0];let O="jpeg";if("image/png"===M.type?O="png":"image/gif"===M.type&&(O="gif"),"dataUrl"===u.resultType||"base64"===u.resultType){const k=new FileReader;k.addEventListener("load",()=>{if("dataUrl"===u.resultType)h({dataUrl:k.result,format:O});else if("base64"===u.resultType){const c=k.result.split(",")[1];h({base64String:c,format:O})}w()}),k.readAsDataURL(M)}else h({webPath:URL.createObjectURL(M),format:O}),w()}),g.addEventListener("cancel",L=>{p(new T.I9("User cancelled photos app")),w()})),g.accept="image/*",g.capture=!0,u.source===$.Photos||u.source===$.Prompt?g.removeAttribute("capture"):u.direction===i.Front?g.capture="user":u.direction===i.Rear&&(g.capture="environment"),g.click()}multipleFileInputExperience(u,h){let p=document.querySelector("#_capacitor-camera-input-multiple");const g=()=>{var w;null===(w=p.parentNode)||void 0===w||w.removeChild(p)};p||(p=document.createElement("input"),p.id="_capacitor-camera-input-multiple",p.type="file",p.hidden=!0,p.multiple=!0,document.body.appendChild(p),p.addEventListener("change",w=>{const L=[];for(let M=0;M<p.files.length;M++){const O=p.files[M];let k="jpeg";"image/png"===O.type?k="png":"image/gif"===O.type&&(k="gif"),L.push({webPath:URL.createObjectURL(O),format:k})}u({photos:L}),g()}),p.addEventListener("cancel",w=>{h(new T.I9("User cancelled photos app")),g()})),p.accept="image/*",p.click()}_getCameraPhoto(u,h){return new Promise((p,g)=>{const w=new FileReader,L=u.type.split("/")[1];"uri"===h.resultType?p({webPath:URL.createObjectURL(u),format:L,saved:!1}):(w.readAsDataURL(u),w.onloadend=()=>{const M=w.result;p("dataUrl"===h.resultType?{dataUrl:M,format:L,saved:!1}:{base64String:M.split(",")[1],format:L,saved:!1})},w.onerror=M=>{g(M)})})}checkPermissions(){var u=this;return(0,E.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw u.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw u.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var u=this;return(0,E.A)(function*(){throw u.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var u=this;return(0,E.A)(function*(){throw u.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var u=this;return(0,E.A)(function*(){throw u.unavailable("Not implemented on web.")})()}}new P;const v=(0,T.F3)("Camera",{web:()=>new P})},8254:(j,H,b)=>{b.r(H),b.d(H,{Preferences:()=>E});const E=(0,b(5083).F3)("Preferences",{web:()=>b.e(2924).then(b.bind(b,2924)).then($=>new $.PreferencesWeb)})},9041:(j,H,b)=>{b.d(H,{I:()=>E});var T=b(2615);let E=(()=>{var $;class i{constructor(){this.checklistData={}}setInspecaoInicial(P){this.checklistData.inspecaoInicial=P}setInspecaoVeiculo(P){this.checklistData.inspecaoVeiculo=P}setFotosVeiculo(P){this.checklistData.fotosVeiculo=P}setPneus(P){this.checklistData.pneus=P,this.checklistData.dataRealizacao=new Date}getChecklistCompleto(){return this.checklistData}limparChecklist(){this.checklistData={}}static#e=$=()=>(this.\u0275fac=function(F){return new(F||i)},this.\u0275prov=T.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}))}return $(),i})()}}]);