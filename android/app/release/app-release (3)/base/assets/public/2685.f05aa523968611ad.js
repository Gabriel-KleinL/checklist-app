"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2685],{2685:(Y,F,u)=>{u.r(F),u.d(F,{InspecaoVeiculoPageModule:()=>B});var f=u(2200),_=u(4341),d=u(7343),h=u(8132),l=u(467),g=u(7691),E=u(3791),o=u(3664),r=u(2615),b=u(4192),k=u(9041),C=u(3008),j=u(4796),P=u(6789),I=u(7506),M=u(6386);function x(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",37),o.nrm(1,"img",38),o.j41(2,"ion-button",39),o.bIt("click",function(){r.eBV(i);const t=o.XpG(2).index,n=o.XpG();return r.Njj(n.removerFotoMotor(t))}),o.nrm(3,"ion-icon",40),o.k0s()()}if(2&a){const i=o.XpG(2).$implicit;o.R7$(),o.Y8G("src",i.foto,o.B4B)}}function V(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",33)(1,"ion-button",34),o.bIt("click",function(){r.eBV(i);const t=o.XpG().index,n=o.XpG();return r.Njj(n.tirarFotoMotor(t))}),o.nrm(2,"ion-icon",35),o.EFF(3),o.k0s(),o.DNE(4,x,4,1,"div",36),o.k0s()}if(2&a){const i=o.XpG().$implicit;o.R7$(),o.Y8G("fill",i.foto?"outline":"solid"),o.R7$(2),o.SpI(" ",i.foto?"Alterar Foto":"Tirar Foto"," "),o.R7$(),o.Y8G("ngIf",i.foto)}}function O(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",26)(1,"div",27)(2,"ion-text",28),o.EFF(3),o.k0s()(),o.j41(4,"ion-segment",29),o.mxI("ngModelChange",function(t){const n=r.eBV(i).$implicit;return o.DH7(n.valor,t)||(n.valor=t),r.Njj(t)}),o.bIt("ionChange",function(){const t=r.eBV(i).$implicit,n=o.XpG();return r.Njj(n.onValorMotorChange(t))}),o.j41(5,"ion-segment-button",30)(6,"ion-label"),o.EFF(7,"Bom"),o.k0s()(),o.j41(8,"ion-segment-button",31)(9,"ion-label"),o.EFF(10,"Ruim"),o.k0s()()(),o.DNE(11,V,5,3,"div",32),o.k0s()}if(2&a){const i=s.$implicit,e=o.XpG();o.R7$(3),o.JRh(i.nome),o.R7$(),o.R50("ngModel",i.valor),o.R7$(7),o.Y8G("ngIf",e.precisaFotoMotor(i))}}function R(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",37),o.nrm(1,"img",38),o.j41(2,"ion-button",39),o.bIt("click",function(){r.eBV(i);const t=o.XpG(2).index,n=o.XpG();return r.Njj(n.removerFotoEletrico(t))}),o.nrm(3,"ion-icon",40),o.k0s()()}if(2&a){const i=o.XpG(2).$implicit;o.R7$(),o.Y8G("src",i.foto,o.B4B)}}function y(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",33)(1,"ion-button",34),o.bIt("click",function(){r.eBV(i);const t=o.XpG().index,n=o.XpG();return r.Njj(n.tirarFotoEletrico(t))}),o.nrm(2,"ion-icon",35),o.EFF(3),o.k0s(),o.DNE(4,R,4,1,"div",36),o.k0s()}if(2&a){const i=o.XpG().$implicit;o.R7$(),o.Y8G("fill",i.foto?"outline":"solid"),o.R7$(2),o.SpI(" ",i.foto?"Alterar Foto":"Tirar Foto"," "),o.R7$(),o.Y8G("ngIf",i.foto)}}function T(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",26)(1,"div",27)(2,"ion-text",28),o.EFF(3),o.k0s()(),o.j41(4,"ion-segment",29),o.mxI("ngModelChange",function(t){const n=r.eBV(i).$implicit;return o.DH7(n.valor,t)||(n.valor=t),r.Njj(t)}),o.bIt("ionChange",function(){const t=r.eBV(i).$implicit,n=o.XpG();return r.Njj(n.onValorEletricoChange(t))}),o.j41(5,"ion-segment-button",30)(6,"ion-label"),o.EFF(7,"Bom"),o.k0s()(),o.j41(8,"ion-segment-button",31)(9,"ion-label"),o.EFF(10,"Ruim"),o.k0s()()(),o.DNE(11,y,5,3,"div",32),o.k0s()}if(2&a){const i=s.$implicit,e=o.XpG();o.R7$(3),o.JRh(i.nome),o.R7$(),o.R50("ngModel",i.valor),o.R7$(7),o.Y8G("ngIf",e.precisaFotoEletrico(i))}}function z(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",37),o.nrm(1,"img",38),o.j41(2,"ion-button",39),o.bIt("click",function(){r.eBV(i);const t=o.XpG(2).index,n=o.XpG();return r.Njj(n.removerFotoLimpeza(t))}),o.nrm(3,"ion-icon",40),o.k0s()()}if(2&a){const i=o.XpG(2).$implicit;o.R7$(),o.Y8G("src",i.foto,o.B4B)}}function G(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",33)(1,"ion-button",34),o.bIt("click",function(){r.eBV(i);const t=o.XpG().index,n=o.XpG();return r.Njj(n.tirarFotoLimpeza(t))}),o.nrm(2,"ion-icon",35),o.EFF(3),o.k0s(),o.DNE(4,z,4,1,"div",36),o.k0s()}if(2&a){const i=o.XpG().$implicit;o.R7$(),o.Y8G("fill",i.foto?"outline":"solid"),o.R7$(2),o.SpI(" ",i.foto?"Alterar Foto":"Tirar Foto"," "),o.R7$(),o.Y8G("ngIf",i.foto)}}function A(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",26)(1,"div",27)(2,"ion-text",28),o.EFF(3),o.k0s()(),o.j41(4,"ion-segment",41),o.mxI("ngModelChange",function(t){const n=r.eBV(i).$implicit;return o.DH7(n.valor,t)||(n.valor=t),r.Njj(t)}),o.bIt("ionChange",function(){const t=r.eBV(i).$implicit,n=o.XpG();return r.Njj(n.onValorLimpezaChange(t))}),o.j41(5,"ion-segment-button",42)(6,"ion-label"),o.EFF(7,"P\xe9ssima"),o.k0s()(),o.j41(8,"ion-segment-button",31)(9,"ion-label"),o.EFF(10,"Ruim"),o.k0s()(),o.j41(11,"ion-segment-button",43)(12,"ion-label"),o.EFF(13,"Satisfat\xf3ria"),o.k0s()(),o.j41(14,"ion-segment-button",44)(15,"ion-label"),o.EFF(16,"\xd3timo"),o.k0s()()(),o.DNE(17,G,5,3,"div",32),o.k0s()}if(2&a){const i=s.$implicit,e=o.XpG();o.R7$(3),o.JRh(i.nome),o.R7$(),o.R50("ngModel",i.valor),o.R7$(13),o.Y8G("ngIf",e.precisaFotoLimpeza(i))}}function D(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",37),o.nrm(1,"img",38),o.j41(2,"ion-button",39),o.bIt("click",function(){r.eBV(i);const t=o.XpG(2).index,n=o.XpG();return r.Njj(n.removerFotoFerramenta(t))}),o.nrm(3,"ion-icon",40),o.k0s()()}if(2&a){const i=o.XpG(2).$implicit;o.R7$(),o.Y8G("src",i.foto,o.B4B)}}function S(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",33)(1,"ion-button",34),o.bIt("click",function(){r.eBV(i);const t=o.XpG().index,n=o.XpG();return r.Njj(n.tirarFotoFerramenta(t))}),o.nrm(2,"ion-icon",35),o.EFF(3),o.k0s(),o.DNE(4,D,4,1,"div",36),o.k0s()}if(2&a){const i=o.XpG().$implicit;o.R7$(),o.Y8G("fill",i.foto?"outline":"solid"),o.R7$(2),o.SpI(" ",i.foto?"Alterar Foto":"Tirar Foto"," "),o.R7$(),o.Y8G("ngIf",i.foto)}}function L(a,s){if(1&a){const i=o.RV6();o.j41(0,"div",26)(1,"div",27)(2,"ion-text",28),o.EFF(3),o.k0s()(),o.j41(4,"ion-segment",45),o.mxI("ngModelChange",function(t){const n=r.eBV(i).$implicit;return o.DH7(n.valor,t)||(n.valor=t),r.Njj(t)}),o.bIt("ionChange",function(){const t=r.eBV(i).$implicit,n=o.XpG();return r.Njj(n.onValorFerramentaChange(t))}),o.j41(5,"ion-segment-button",46)(6,"ion-label"),o.EFF(7,"Cont\xe9m"),o.k0s()(),o.j41(8,"ion-segment-button",47)(9,"ion-label"),o.EFF(10,"N\xe3o Cont\xe9m"),o.k0s()()(),o.DNE(11,S,5,3,"div",32),o.k0s()}if(2&a){const i=s.$implicit,e=o.XpG();o.R7$(3),o.JRh(i.nome),o.R7$(),o.R50("ngModel",i.valor),o.R7$(7),o.Y8G("ngIf",e.precisaFotoFerramenta(i))}}function $(a,s){if(1&a){const i=o.RV6();o.j41(0,"ion-header")(1,"ion-toolbar",48)(2,"ion-title"),o.EFF(3,"Tutorial - Inspe\xe7\xe3o do Ve\xedculo"),o.k0s(),o.j41(4,"ion-buttons",2)(5,"ion-button",3),o.bIt("click",function(){r.eBV(i);const t=o.XpG();return r.Njj(t.fecharAjuda())}),o.nrm(6,"ion-icon",49),o.k0s()()()(),o.j41(7,"ion-content",50)(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title",48),o.nrm(11,"ion-icon",51),o.EFF(12," Como realizar a inspe\xe7\xe3o "),o.k0s()(),o.j41(13,"ion-card-content")(14,"p"),o.EFF(15,"Nesta etapa, voc\xea vai inspecionar componentes essenciais do ve\xedculo. Avalie cada item cuidadosamente e marque o status correto."),o.k0s()()(),o.j41(16,"ion-card")(17,"ion-card-header")(18,"ion-card-title"),o.nrm(19,"ion-icon",52),o.EFF(20," Inspe\xe7\xe3o do Motor "),o.k0s()(),o.j41(21,"ion-card-content")(22,"p")(23,"strong"),o.EFF(24,"Como verificar:"),o.k0s()(),o.j41(25,"ul")(26,"li")(27,"strong"),o.EFF(28,"\xc1gua do Radiador:"),o.k0s(),o.EFF(29," Verifique o n\xedvel no reservat\xf3rio. Deve estar entre MIN e MAX."),o.k0s(),o.j41(30,"li")(31,"strong"),o.EFF(32,"\xc1gua Limpador Parabrisa:"),o.k0s(),o.EFF(33," Confira o reservat\xf3rio. Deve ter l\xedquido suficiente."),o.k0s(),o.j41(34,"li")(35,"strong"),o.EFF(36,"Fluido de Freio:"),o.k0s(),o.EFF(37," Verifique o n\xedvel no reservat\xf3rio. N\xe3o pode estar abaixo do m\xednimo."),o.k0s(),o.j41(38,"li")(39,"strong"),o.EFF(40,"N\xedvel de \xd3leo:"),o.k0s(),o.EFF(41," Use a vareta medidora. O \xf3leo deve estar entre MIN e MAX."),o.k0s(),o.j41(42,"li")(43,"strong"),o.EFF(44,"Tampa do Radiador:"),o.k0s(),o.EFF(45," Verifique se est\xe1 bem fechada e sem danos."),o.k0s()(),o.j41(46,"p")(47,"strong"),o.EFF(48,"Importante:"),o.k0s(),o.EFF(49,' Se marcar "Ruim", voc\xea precisar\xe1 tirar uma foto do problema!'),o.k0s()()(),o.j41(50,"ion-card")(51,"ion-card-header")(52,"ion-card-title"),o.nrm(53,"ion-icon",53),o.EFF(54," Sistema El\xe9trico "),o.k0s()(),o.j41(55,"ion-card-content")(56,"p")(57,"strong"),o.EFF(58,"Como verificar:"),o.k0s()(),o.j41(59,"ul")(60,"li")(61,"strong"),o.EFF(62,"Seta Esquerda:"),o.k0s(),o.EFF(63," Ligue e verifique se pisca corretamente."),o.k0s(),o.j41(64,"li")(65,"strong"),o.EFF(66,"Seta Direita:"),o.k0s(),o.EFF(67," Ligue e verifique se pisca corretamente."),o.k0s(),o.j41(68,"li")(69,"strong"),o.EFF(70,"Pisca Alerta:"),o.k0s(),o.EFF(71," Ative e veja se as 4 setas piscam."),o.k0s(),o.j41(72,"li")(73,"strong"),o.EFF(74,"Farol:"),o.k0s(),o.EFF(75," Ligue os far\xf3is baixo e alto. Ambos devem acender."),o.k0s()(),o.j41(76,"p")(77,"strong"),o.EFF(78,"Importante:"),o.k0s(),o.EFF(79,' Se marcar "Ruim", tire uma foto mostrando o problema!'),o.k0s()()(),o.j41(80,"ion-card")(81,"ion-card-header")(82,"ion-card-title"),o.nrm(83,"ion-icon",54),o.EFF(84," Limpeza do Ve\xedculo "),o.k0s()(),o.j41(85,"ion-card-content")(86,"p")(87,"strong"),o.EFF(88,"Avalie o estado de limpeza:"),o.k0s()(),o.j41(89,"ul")(90,"li")(91,"strong"),o.EFF(92,"P\xe9ssima:"),o.k0s(),o.EFF(93," Muito sujo, com sujeira acumulada ou mal cheiro"),o.k0s(),o.j41(94,"li")(95,"strong"),o.EFF(96,"Ruim:"),o.k0s(),o.EFF(97," Sujo, precisa de limpeza"),o.k0s(),o.j41(98,"li")(99,"strong"),o.EFF(100,"Satisfat\xf3ria:"),o.k0s(),o.EFF(101," Razoavelmente limpo, pode melhorar"),o.k0s(),o.j41(102,"li")(103,"strong"),o.EFF(104,"\xd3timo:"),o.k0s(),o.EFF(105," Muito limpo e organizado"),o.k0s()(),o.j41(106,"p")(107,"strong"),o.EFF(108,"Limpeza Interna:"),o.k0s(),o.EFF(109," Bancos, tapetes, painel, console"),o.k0s(),o.j41(110,"p")(111,"strong"),o.EFF(112,"Limpeza Externa:"),o.k0s(),o.EFF(113," Lataria, vidros, rodas"),o.k0s(),o.j41(114,"p")(115,"strong"),o.EFF(116,"Importante:"),o.k0s(),o.EFF(117,' Se marcar "Ruim" ou "P\xe9ssima", tire uma foto!'),o.k0s()()(),o.j41(118,"ion-card")(119,"ion-card-header")(120,"ion-card-title"),o.nrm(121,"ion-icon",55),o.EFF(122," Ferramentas e Equipamentos "),o.k0s()(),o.j41(123,"ion-card-content")(124,"p")(125,"strong"),o.EFF(126,"Verifique se o ve\xedculo possui:"),o.k0s()(),o.j41(127,"ul")(128,"li")(129,"strong"),o.EFF(130,"Macaco:"),o.k0s(),o.EFF(131," Ferramenta para levantar o ve\xedculo"),o.k0s(),o.j41(132,"li")(133,"strong"),o.EFF(134,"Chave de Roda:"),o.k0s(),o.EFF(135," Chave em formato de cruz ou L"),o.k0s(),o.j41(136,"li")(137,"strong"),o.EFF(138,"Chave do Estepe:"),o.k0s(),o.EFF(139," Chave para soltar o pneu estepe"),o.k0s(),o.j41(140,"li")(141,"strong"),o.EFF(142,"Tri\xe2ngulo:"),o.k0s(),o.EFF(143," Sinalizador de emerg\xeancia"),o.k0s()(),o.j41(144,"p")(145,"strong"),o.EFF(146,"Marque:"),o.k0s()(),o.j41(147,"p"),o.EFF(148,"\u2705 "),o.j41(149,"strong"),o.EFF(150,"Cont\xe9m"),o.k0s(),o.EFF(151," - Se o item est\xe1 presente no ve\xedculo"),o.k0s(),o.j41(152,"p"),o.EFF(153,"\u274c "),o.j41(154,"strong"),o.EFF(155,"N\xe3o Cont\xe9m"),o.k0s(),o.EFF(156," - Se o item est\xe1 faltando (tire uma foto!)"),o.k0s()()(),o.j41(157,"ion-card",56)(158,"ion-card-content")(159,"ion-text",1)(160,"p"),o.nrm(161,"ion-icon",57),o.j41(162,"strong"),o.EFF(163," Fotos Obrigat\xf3rias:"),o.k0s(),o.EFF(164," Voc\xea deve tirar foto de todos os itens marcados como problem\xe1ticos (Ruim, P\xe9ssima ou N\xe3o Cont\xe9m). "),o.k0s()()()(),o.j41(165,"ion-card",58)(166,"ion-card-content")(167,"ion-text",1)(168,"p"),o.nrm(169,"ion-icon",59),o.j41(170,"strong"),o.EFF(171," Dica:"),o.k0s(),o.EFF(172," Seja criterioso na avalia\xe7\xe3o. Registre todos os problemas encontrados para manter um hist\xf3rico confi\xe1vel. "),o.k0s()()()()()}}const N=[{path:"",component:(()=>{var a;class s{constructor(e,t,n,p,m,c,v){this.router=e,this.checklistData=t,this.localStorage=n,this.authService=p,this.tempoTelasService=m,this.configItensService=c,this.apiService=v,this.inspecao={motor:[{nome:"\xc1gua Radiador",valor:null},{nome:"\xc1gua Limpador Parabrisa",valor:null},{nome:"Fluido de Freio",valor:null},{nome:"N\xedvel de \xd3leo",valor:null},{nome:"Tampa do Radiador",valor:null},{nome:"Freio de M\xe3o",valor:null}],limpeza:[{nome:"Limpeza Interna",valor:null},{nome:"Limpeza Externa",valor:null}],eletricos:[{nome:"Seta Esquerda",valor:null},{nome:"Seta Direita",valor:null},{nome:"Pisca Alerta",valor:null},{nome:"Farol",valor:null}],ferramentas:[{nome:"Macaco",valor:null},{nome:"Chave de Roda",valor:null},{nome:"Chave do Estepe",valor:null},{nome:"Tri\xe2ngulo",valor:null}]},this.opcoesMotor=["bom","ruim"],this.opcoesLimpeza=["pessima","ruim","satisfatoria","otimo"],this.opcoesEletricos=["bom","ruim"],this.opcoesFerramentas=["contem","nao_contem"],this.exibirAjuda=!1}ngOnInit(){var e=this;return(0,l.A)(function*(){e.tempoTelasService.iniciarTela("inspecao-veiculo"),yield e.carregarItensHabilitados(),yield e.recuperarDadosSalvos(),yield e.verificarPrimeiroAcesso()})()}ngOnDestroy(){const e=this.authService.currentUserValue?.id,t=this.tempoTelasService.finalizarTela(void 0,e);t&&t.subscribe({next:n=>console.log("[Tempo] Salvo com sucesso:",n),error:n=>console.error("[Tempo] Erro ao salvar:",n)})}carregarItensHabilitados(){var e=this;return(0,l.A)(function*(){try{console.log("[Config Itens] Carregando itens habilitados do banco...");const t=yield e.configItensService.buscarHabilitados().toPromise();t&&t.length>0?(console.log("[Config Itens] Itens carregados:",t),e.inspecao.motor=t.filter(n=>"MOTOR"===n.categoria).map(n=>({nome:n.nome_item,valor:null})),e.inspecao.eletricos=t.filter(n=>"ELETRICO"===n.categoria).map(n=>({nome:n.nome_item,valor:null})),e.inspecao.limpeza=t.filter(n=>"LIMPEZA"===n.categoria).map(n=>({nome:n.nome_item,valor:null})),e.inspecao.ferramentas=t.filter(n=>"FERRAMENTA"===n.categoria).map(n=>({nome:n.nome_item,valor:null})),console.log("[Config Itens] Inspe\xe7\xe3o configurada com itens do banco:",e.inspecao)):console.log("[Config Itens] Nenhum item habilitado encontrado, usando itens padr\xe3o")}catch(t){console.error("[Config Itens] Erro ao carregar itens:",t),console.log("[Config Itens] Mantendo itens padr\xe3o hardcoded devido ao erro")}})()}recuperarDadosSalvos(){var e=this;return(0,l.A)(function*(){const t=yield e.localStorage.recuperarInspecaoVeiculo();t&&(e.inspecao={motor:t.motor||e.inspecao.motor,limpeza:t.limpeza||e.inspecao.limpeza,eletricos:t.eletricos||e.inspecao.eletricos,ferramentas:t.ferramentas||e.inspecao.ferramentas},(!t.eletricos||!t.ferramentas)&&(console.log("Migrando dados antigos para nova estrutura..."),yield e.salvarLocalmente()))})()}salvarLocalmente(){var e=this;return(0,l.A)(function*(){yield e.localStorage.salvarInspecaoVeiculo(e.inspecao)})()}validarFormulario(){const e=this.inspecao.motor.every(m=>{const c=null!==m.valor,v=this.precisaFotoMotor(m)&&!m.foto;return c&&!v}),t=this.inspecao.limpeza.every(m=>{const c=null!==m.valor,v=this.precisaFotoLimpeza(m)&&!m.foto;return c&&!v}),n=this.inspecao.eletricos.every(m=>{const c=null!==m.valor,v=this.precisaFotoEletrico(m)&&!m.foto;return c&&!v}),p=this.inspecao.ferramentas.every(m=>{const c=null!==m.valor,v=this.precisaFotoFerramenta(m)&&!m.foto;return c&&!v});return e&&t&&n&&p}precisaFotoMotor(e){return"ruim"===e.valor}precisaFotoLimpeza(e){return"ruim"===e.valor||"pessima"===e.valor}precisaFotoEletrico(e){return"ruim"===e.valor}precisaFotoFerramenta(e){return"nao_contem"===e.valor}tirarFotoMotor(e){var t=this;return(0,l.A)(function*(){try{const n=yield g.i7.getPhoto({quality:50,allowEditing:!1,resultType:g.LK.DataUrl,source:g.ru.Camera,width:800,height:800});t.inspecao.motor[e].foto=n.dataUrl,yield t.salvarLocalmente()}catch(n){console.log("Foto cancelada ou erro:",n)}})()}tirarFotoLimpeza(e){var t=this;return(0,l.A)(function*(){try{const n=yield g.i7.getPhoto({quality:50,allowEditing:!1,resultType:g.LK.DataUrl,source:g.ru.Camera,width:800,height:800});t.inspecao.limpeza[e].foto=n.dataUrl,yield t.salvarLocalmente()}catch(n){console.log("Foto cancelada ou erro:",n)}})()}removerFotoMotor(e){var t=this;return(0,l.A)(function*(){t.inspecao.motor[e].foto=void 0,yield t.salvarLocalmente()})()}removerFotoLimpeza(e){var t=this;return(0,l.A)(function*(){t.inspecao.limpeza[e].foto=void 0,yield t.salvarLocalmente()})()}tirarFotoEletrico(e){var t=this;return(0,l.A)(function*(){try{const n=yield g.i7.getPhoto({quality:50,allowEditing:!1,resultType:g.LK.DataUrl,source:g.ru.Camera,width:800,height:800});t.inspecao.eletricos[e].foto=n.dataUrl,yield t.salvarLocalmente()}catch(n){console.log("Foto cancelada ou erro:",n)}})()}removerFotoEletrico(e){var t=this;return(0,l.A)(function*(){t.inspecao.eletricos[e].foto=void 0,yield t.salvarLocalmente()})()}tirarFotoFerramenta(e){var t=this;return(0,l.A)(function*(){try{const n=yield g.i7.getPhoto({quality:50,allowEditing:!1,resultType:g.LK.DataUrl,source:g.ru.Camera,width:800,height:800});t.inspecao.ferramentas[e].foto=n.dataUrl,yield t.salvarLocalmente()}catch(n){console.log("Foto cancelada ou erro:",n)}})()}removerFotoFerramenta(e){var t=this;return(0,l.A)(function*(){t.inspecao.ferramentas[e].foto=void 0,yield t.salvarLocalmente()})()}onValorMotorChange(e){var t=this;return(0,l.A)(function*(){"bom"===e.valor&&(e.foto=void 0),yield t.salvarLocalmente()})()}onValorLimpezaChange(e){var t=this;return(0,l.A)(function*(){("satisfatoria"===e.valor||"otimo"===e.valor)&&(e.foto=void 0),yield t.salvarLocalmente()})()}onValorEletricoChange(e){var t=this;return(0,l.A)(function*(){"bom"===e.valor&&(e.foto=void 0),yield t.salvarLocalmente()})()}onValorFerramentaChange(e){var t=this;return(0,l.A)(function*(){"contem"===e.valor&&(e.foto=void 0),yield t.salvarLocalmente()})()}getCorStatus(e){switch(e){case"bom":case"otimo":return"success";case"satisfatoria":return"warning";case"ruim":case"pessima":return"danger";default:return"medium"}}getLabelLimpeza(e){return{pessima:"P\xe9ssima",ruim:"Ruim",satisfatoria:"Satisfat\xf3ria",otimo:"\xd3timo"}[e]||e}salvarInspecao(){var e=this;return(0,l.A)(function*(){if(!e.validarFormulario())return void alert('Por favor, preencha todos os campos da inspe\xe7\xe3o e tire fotos dos itens marcados como "ruim", "p\xe9ssima" ou "n\xe3o cont\xe9m".');const t=e.authService.currentUserValue?.id,n=e.checklistData.getInspecaoId();if(n)try{const p=[];e.inspecao.motor.forEach(c=>{c.valor&&p.push({categoria:"MOTOR",item:c.nome,status:c.valor,foto:c.foto||null})}),e.inspecao.eletricos.forEach(c=>{c.valor&&p.push({categoria:"ELETRICO",item:c.nome,status:c.valor,foto:c.foto||null})}),e.inspecao.limpeza.forEach(c=>{c.valor&&p.push({categoria:"LIMPEZA",item:c.nome,status:c.valor,foto:c.foto||null})}),e.inspecao.ferramentas.forEach(c=>{c.valor&&p.push({categoria:"FERRAMENTA",item:c.nome,status:c.valor,foto:c.foto||null})}),console.log("[Inspe\xe7\xe3o] Atualizando inspe\xe7\xe3o com itens..."),yield e.apiService.atualizarInspecao(n,{itens_inspecao:p}).toPromise(),console.log("[Inspe\xe7\xe3o] Inspe\xe7\xe3o atualizada com sucesso"),e.checklistData.setInspecaoVeiculo(e.inspecao);const m=e.tempoTelasService.finalizarTela(n,t);if(m)try{yield m.toPromise(),console.log("[Tempo] Tempo da tela inspecao-veiculo salvo com sucesso com inspecao_id:",n)}catch(c){console.error("[Tempo] Erro ao salvar tempo:",c)}e.router.navigate(["/fotos-veiculo"])}catch(p){console.error("[Inspe\xe7\xe3o] Erro ao atualizar inspe\xe7\xe3o:",p),alert("Erro ao salvar dados. Por favor, tente novamente.")}else alert("Erro: ID da inspe\xe7\xe3o n\xe3o encontrado. Por favor, reinicie o processo.")})()}voltar(){this.router.navigate(["/home"])}mostrarAjuda(){this.exibirAjuda=!0}fecharAjuda(){this.exibirAjuda=!1}verificarPrimeiroAcesso(){return(0,l.A)(function*(){})()}iniciarTour(){var e=this;const t=(0,E.B)({showProgress:!0,showButtons:["next"],allowClose:!1,steps:[{element:"#tour-motor",popover:{title:"1. Inspe\xe7\xe3o do Motor",description:'Avalie os componentes do motor: \xc1gua do Radiador, \xc1gua do Limpador, Fluido de Freio, N\xedvel de \xd3leo e Tampa do Radiador. Marque "Bom" ou "Ruim".',side:"bottom",align:"start"}},{element:"#tour-motor-card",popover:{title:"Fotos Obrigat\xf3rias",description:'Se marcar qualquer item como "Ruim", voc\xea DEVE tirar uma foto do problema. O campo de foto aparecer\xe1 automaticamente.',side:"bottom",align:"start"}},{element:"#tour-eletrico",popover:{title:"2. Sistema El\xe9trico",description:"Teste o funcionamento das setas (esquerda e direita), pisca-alerta e far\xf3is. Verifique se todos funcionam corretamente.",side:"bottom",align:"start"}},{element:"#tour-limpeza",popover:{title:"3. Limpeza do Ve\xedculo",description:"Avalie a limpeza interna e externa do ve\xedculo em 4 n\xedveis: P\xe9ssima, Ruim, Satisfat\xf3ria ou \xd3timo.",side:"bottom",align:"start"}},{element:"#tour-ferramentas",popover:{title:"4. Ferramentas e Equipamentos",description:'Verifique se o ve\xedculo cont\xe9m: Macaco, Chave de Roda, Chave do Estepe e Tri\xe2ngulo. Marque "Cont\xe9m" ou "N\xe3o Cont\xe9m".',side:"bottom",align:"start"}},{element:"#tour-salvar",popover:{title:"5. Salvar e Continuar",description:'Ap\xf3s preencher todos os campos obrigat\xf3rios e tirar as fotos necess\xe1rias, clique em "Salvar Inspe\xe7\xe3o" para avan\xe7ar.',side:"top",align:"center"}},{popover:{title:"Tutorial Conclu\xeddo!",description:"Agora preencha todos os campos da inspe\xe7\xe3o do ve\xedculo para continuar!"}}],onDestroyStarted:(n=(0,l.A)(function*(){yield e.marcarTutorialComoConcluido(),t.destroy()}),function(){return n.apply(this,arguments)})});var n;t.drive()}marcarTutorialComoConcluido(){return(0,l.A)(function*(){})()}static#o=a=()=>(this.\u0275fac=function(t){return new(t||s)(o.rXU(b.Ix),o.rXU(k.I),o.rXU(C.s),o.rXU(j.u),o.rXU(P.i),o.rXU(I.X),o.rXU(M.G))},this.\u0275cmp=o.VBU({type:s,selectors:[["app-inspecao-veiculo"]],standalone:!1,decls:47,vars:8,consts:[[3,"translucent"],["color","dark"],["slot","end"],[3,"click"],["slot","icon-only","name","help-circle"],["color","dark",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"form-container"],["id","tour-motor",1,"section-header"],["name","construct","color","primary"],["id","tour-motor-card"],["class","item-inspecao",4,"ngFor","ngForOf"],["id","tour-eletrico",1,"section-header"],["name","bulb","color","primary"],["id","tour-eletrico-card"],["id","tour-limpeza",1,"section-header"],["name","sparkles","color","primary"],["id","tour-limpeza-card"],["id","tour-ferramentas",1,"section-header"],["name","build","color","primary"],["id","tour-ferramentas-card"],["id","tour-salvar",1,"save-section"],["expand","block","size","large","color","primary",3,"click","disabled"],["slot","start","name","checkmark-circle"],[3,"didDismiss","isOpen"],[1,"item-inspecao"],[1,"item-label"],["color","light"],[1,"segment-motor",3,"ngModelChange","ionChange","ngModel"],["value","bom"],["value","ruim"],["class","photo-section",4,"ngIf"],[1,"photo-section"],["expand","block","color","primary","size","small",3,"click","fill"],["slot","start","name","camera"],["class","photo-preview",4,"ngIf"],[1,"photo-preview"],[3,"src"],["size","small","color","danger","fill","clear",3,"click"],["slot","icon-only","name","trash"],["scrollable","true",1,"segment-limpeza",3,"ngModelChange","ionChange","ngModel"],["value","pessima"],["value","satisfatoria"],["value","otimo"],[1,"segment-ferramenta",3,"ngModelChange","ionChange","ngModel"],["value","contem"],["value","nao_contem"],["color","primary"],["name","close"],[1,"ion-padding"],["name","information-circle"],["name","construct"],["name","flash"],["name","water"],["name","build"],["color","warning"],["name","camera"],["color","success"],["name","checkmark-circle"]],template:function(t,n){1&t&&(o.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),o.EFF(3," Inspe\xe7\xe3o do Ve\xedculo "),o.k0s(),o.j41(4,"ion-buttons",2)(5,"ion-button",3),o.bIt("click",function(){return n.mostrarAjuda()}),o.nrm(6,"ion-icon",4),o.k0s()()()(),o.j41(7,"ion-content",5)(8,"ion-header",6)(9,"ion-toolbar",1)(10,"ion-title",7),o.EFF(11,"Inspe\xe7\xe3o do Ve\xedculo"),o.k0s()()(),o.j41(12,"div",8)(13,"div",9),o.nrm(14,"ion-icon",10),o.j41(15,"h2"),o.EFF(16,"Inspe\xe7\xe3o do Motor"),o.k0s()(),o.j41(17,"ion-card",11)(18,"ion-card-content"),o.DNE(19,O,12,3,"div",12),o.k0s()(),o.j41(20,"div",13),o.nrm(21,"ion-icon",14),o.j41(22,"h2"),o.EFF(23,"Sistema El\xe9trico"),o.k0s()(),o.j41(24,"ion-card",15)(25,"ion-card-content"),o.DNE(26,T,12,3,"div",12),o.k0s()(),o.j41(27,"div",16),o.nrm(28,"ion-icon",17),o.j41(29,"h2"),o.EFF(30,"Limpeza"),o.k0s()(),o.j41(31,"ion-card",18)(32,"ion-card-content"),o.DNE(33,A,18,3,"div",12),o.k0s()(),o.j41(34,"div",19),o.nrm(35,"ion-icon",20),o.j41(36,"h2"),o.EFF(37,"Ferramentas e Equipamentos"),o.k0s()(),o.j41(38,"ion-card",21)(39,"ion-card-content"),o.DNE(40,L,12,3,"div",12),o.k0s()(),o.j41(41,"div",22)(42,"ion-button",23),o.bIt("click",function(){return n.salvarInspecao()}),o.nrm(43,"ion-icon",24),o.EFF(44," Salvar Inspe\xe7\xe3o "),o.k0s()()()(),o.j41(45,"ion-modal",25),o.bIt("didDismiss",function(){return n.fecharAjuda()}),o.DNE(46,$,173,0,"ng-template"),o.k0s()),2&t&&(o.Y8G("translucent",!0),o.R7$(7),o.Y8G("fullscreen",!0),o.R7$(12),o.Y8G("ngForOf",n.inspecao.motor),o.R7$(7),o.Y8G("ngForOf",n.inspecao.eletricos),o.R7$(7),o.Y8G("ngForOf",n.inspecao.limpeza),o.R7$(7),o.Y8G("ngForOf",n.inspecao.ferramentas),o.R7$(2),o.Y8G("disabled",!n.validarFormulario()),o.R7$(3),o.Y8G("isOpen",n.exibirAjuda))},dependencies:[f.Sq,f.bT,_.BC,_.vS,d.Jm,d.QW,d.b_,d.I9,d.ME,d.tN,d.W9,d.eU,d.iq,d.he,d.Gp,d.eP,d.IO,d.BC,d.ai,d.Sb,d.Je],styles:['@charset "UTF-8";.form-container[_ngcontent-%COMP%]{padding:16px 16px 100px}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:24px;margin-bottom:16px;padding-left:4px}.section-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:22px;font-weight:700;margin:0}ion-card[_ngcontent-%COMP%]{--background: #1a1a1a;--color: #ffffff;border:1px solid #404040;margin-bottom:20px;border-radius:12px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:16px}.item-inspecao[_ngcontent-%COMP%]{margin-bottom:24px;background:#0c0c0c;border:1px solid #353535;border-radius:10px;padding:12px}.item-inspecao[_ngcontent-%COMP%]:last-child{margin-bottom:0}.item-inspecao[_ngcontent-%COMP%]   .item-label[_ngcontent-%COMP%]{margin-bottom:12px;font-size:16px;font-weight:600;color:#fff}.item-inspecao[_ngcontent-%COMP%]   .photo-section[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #404040}.item-inspecao[_ngcontent-%COMP%]   .photo-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 8px;margin-bottom:12px;font-weight:600;font-size:14px}.item-inspecao[_ngcontent-%COMP%]   .photo-section[_ngcontent-%COMP%]   ion-button[fill=outline][_ngcontent-%COMP%]{--border-color: var(--ion-color-primary);--color: var(--ion-color-primary)}.item-inspecao[_ngcontent-%COMP%]   .photo-section[_ngcontent-%COMP%]   .photo-preview[_ngcontent-%COMP%]{position:relative;margin-top:12px;background:var(--ion-color-dark);border-radius:12px;border:2px solid var(--ion-color-primary);padding:8px;overflow:hidden}.item-inspecao[_ngcontent-%COMP%]   .photo-section[_ngcontent-%COMP%]   .photo-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:8px;display:block}.item-inspecao[_ngcontent-%COMP%]   .photo-section[_ngcontent-%COMP%]   .photo-preview[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;--background: rgba(255, 0, 0, .9);--border-radius: 50%;width:36px;height:36px;margin:0}.item-inspecao[_ngcontent-%COMP%]   .photo-section[_ngcontent-%COMP%]   .photo-preview[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}ion-segment[_ngcontent-%COMP%]{--background: #000000;border:1px solid #5a5a5a;border-radius:8px;min-height:40px;box-shadow:0 0 0 1px #ffffff0a inset}ion-segment.segment-motor[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--indicator-color: var(--ion-color-primary);--color: #b5b5b5;--color-checked: #ffffff;font-weight:600;text-transform:uppercase;font-size:14px}ion-segment.segment-motor[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]::part(native){border-radius:6px}ion-segment.segment-motor[_ngcontent-%COMP%]   ion-segment-button[value=bom][_ngcontent-%COMP%]::part(indicator-background){background:#2dd36f}ion-segment.segment-motor[_ngcontent-%COMP%]   ion-segment-button[value=ruim][_ngcontent-%COMP%]::part(indicator-background){background:var(--ion-color-primary)}ion-segment.segment-limpeza[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--indicator-color: var(--ion-color-primary);--color: #b5b5b5;--color-checked: #ffffff;font-weight:600;text-transform:capitalize;font-size:13px;min-width:90px}ion-segment.segment-limpeza[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]::part(native){border-radius:6px}ion-segment.segment-limpeza[_ngcontent-%COMP%]   ion-segment-button[value=otimo][_ngcontent-%COMP%]::part(indicator-background){background:#2dd36f}ion-segment.segment-limpeza[_ngcontent-%COMP%]   ion-segment-button[value=satisfatoria][_ngcontent-%COMP%]::part(indicator-background){background:#ffc409}ion-segment.segment-limpeza[_ngcontent-%COMP%]   ion-segment-button[value=ruim][_ngcontent-%COMP%]::part(indicator-background){background:#ff6b3d}ion-segment.segment-limpeza[_ngcontent-%COMP%]   ion-segment-button[value=pessima][_ngcontent-%COMP%]::part(indicator-background){background:var(--ion-color-primary)}ion-segment.segment-ferramenta[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{--indicator-color: var(--ion-color-primary);--color: #b5b5b5;--color-checked: #ffffff;font-weight:600;text-transform:capitalize;font-size:14px}ion-segment.segment-ferramenta[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]::part(native){border-radius:6px}ion-segment.segment-ferramenta[_ngcontent-%COMP%]   ion-segment-button[value=contem][_ngcontent-%COMP%]::part(indicator-background){background:#2dd36f}ion-segment.segment-ferramenta[_ngcontent-%COMP%]   ion-segment-button[value=nao_contem][_ngcontent-%COMP%]::part(indicator-background){background:var(--ion-color-primary)}.save-section[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;padding:16px;background:linear-gradient(to bottom,transparent,#000000 20%);z-index:10}.save-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 12px;font-size:18px;font-weight:700;height:56px;box-shadow:0 4px 12px #ff00004d}.save-section[_ngcontent-%COMP%]   ion-button[disabled][_ngcontent-%COMP%]{opacity:.4}']}))}return a(),s})()}];let X=(()=>{var a;class s{static#o=a=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275mod=o.$C({type:s}),this.\u0275inj=r.G2t({imports:[h.iI.forChild(N),h.iI]}))}return a(),s})(),B=(()=>{var a;class s{static#o=a=()=>(this.\u0275fac=function(t){return new(t||s)},this.\u0275mod=o.$C({type:s}),this.\u0275inj=r.G2t({imports:[f.MD,_.YN,d.bv,X]}))}return a(),s})()}}]);